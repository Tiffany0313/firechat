{"version":3,"sources":["firebase.js","components/SignIn.js","components/SendMessages.js","components/NavBar.js","components/Chat.js","App.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","SignIn","user","useState","isActive","setActive","useEffect","$","setTimeout","$_","transition","scale","addClass","height","className","onClick","id","alt","src","style","transitionDelay","type","required","href","paddingTop","provider","GoogleAuthProvider","signInWithPopup","version","xmlns","width","viewBox","fill","d","zIndex","SendMessages","scroll","msg","setMsg","sendMessage","e","a","preventDefault","currentUser","uid","photoURL","collection","add","text","createdAt","FieldValue","serverTimestamp","current","scrollIntoView","behavior","onSubmit","Input","fontSize","fontWeight","marginLeft","marginBottom","placeholder","value","onChange","target","Button","margin","maxWidth","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","ButtonAppBar","classes","AppBar","position","Toolbar","IconButton","edge","color","Typography","variant","signOut","Chat","messages","setMessages","useRef","orderBy","limit","onSnapshot","snapshot","docs","map","doc","data","ref","App","useAuthState","createTheme","palette","primary","main","ReactDOM","render","StrictMode","ThemeProvider","document","getElementById"],"mappings":"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","file":"static/js/main.dc04e959.chunk.js","sourcesContent":["import firebase from 'firebase'\r\n\r\nconst firebaseApp = firebase.initializeApp({\r\n    apiKey: \"AIzaSyBqHWdDg-ijdxQ_d7QOP-fvxvfaCFG5ygU\",\r\n    authDomain: \"firechat-37187.firebaseapp.com\",\r\n    projectId: \"firechat-37187\",\r\n    storageBucket: \"firechat-37187.appspot.com\",\r\n    messagingSenderId: \"1029907543038\",\r\n    appId: \"1:1029907543038:web:73889e7981a440d976c6af\",\r\n    measurementId: \"G-VQ7XT8RGFP\"\r\n})\r\n\r\nconst db = firebaseApp.firestore()\r\n\r\nconst auth = firebase.auth()\r\n\r\nexport { db, auth }","import React, { useState, useEffect } from 'react'\r\nimport firebase from 'firebase'\r\nimport { auth } from '../firebase'\r\nimport $ from 'jquery'\r\nimport $_ from 'jquery.transit'\r\n\r\nfunction SignIn({ user }) {\r\n\r\n    const [isActive, setActive] = useState(\"true\")\r\n\r\n    const handleBulbClick = () => {\r\n        setActive(!isActive)\r\n    }\r\n\r\n    function signInWithGoogle() {\r\n        const provider = new firebase.auth.GoogleAuthProvider()\r\n        auth.signInWithPopup(provider)\r\n    }\r\n\r\n    useEffect(() => {\r\n        // JQUERY\r\n        $(function () {\r\n\r\n            setTimeout(function () {\r\n                $_('.logoContainer').transition({ scale: 1 }, 700, 'ease');\r\n                setTimeout(function () {\r\n                    $('.logoContainer .logo').addClass('loadIn');\r\n                    setTimeout(function () {\r\n                        $('.logoContainer .text').addClass('loadIn');\r\n                        setTimeout(function () {\r\n                            $_('.acceptContainer').transition({ height: '431.5px' });\r\n                            setTimeout(function () {\r\n                                $('.acceptContainer').addClass('loadIn');\r\n                                setTimeout(function () {\r\n                                    $('.formDiv, form h1').addClass('loadIn');\r\n                                }, 500)\r\n                            }, 500)\r\n                        }, 500)\r\n                    }, 500)\r\n                }, 1000)\r\n            }, 10)\r\n        });\r\n    }, [user])\r\n\r\n    return (\r\n        <>\r\n            <div className=\"container\">\r\n                <div className={`bulb ${isActive ? \"\" : \"off\"}`} onClick={handleBulbClick}>\r\n                    <div className={`filaments ${isActive ? \"\" : \"off\"}`}></div>\r\n                </div>\r\n            </div>\r\n\r\n            <div id=\"formContainer\">\r\n                <div id=\"inviteContainer\">\r\n                    <div className=\"logoContainer\">\r\n                        <img className=\"logo\" alt=\"\" src=\"https://seeklogo.com/images/D/discord-logo-134E148657-seeklogo.com.png\" />\r\n                    </div>\r\n\r\n\r\n                    <div className=\"acceptContainer\">\r\n                        <form>\r\n                            <h1>WELCOME BACK!</h1>\r\n                            <div className=\"formContainer\">\r\n                                <div className=\"formDiv\" style={{ transitionDelay: '0.2s' }}>\r\n                                    <p>EMAIL</p>\r\n                                    <input type=\"email\" required=\"\" />\r\n                                </div>\r\n                                <div className=\"formDiv\" style={{ transitionDelay: '0.4s' }}>\r\n                                    <p>PASSWSORD</p>\r\n                                    <input type=\"password\" required=\"\" />\r\n                                    <a className=\"forgotPas\" href=\"\">FORGOT YOUR PASSWORD?</a>\r\n                                </div>\r\n                                <div className=\"formDiv\" style={{ transitionDelay: '0.6s' }}>\r\n                                    <button className=\"acceptBtn\" type=\"submit\">Login</button>\r\n                                    <span className=\"register\">Need an account?<a href=\"\">Register</a></span>\r\n                                </div>\r\n                                <div className=\"formDiv\" style={{ transitionDelay: '0.8s', paddingTop: 0 }}>\r\n                                    <button type=\"button\" id=\"login-google-button\" onClick={signInWithGoogle}><svg className=\"active\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"18px\" height=\"18px\" viewBox=\"0 0 48 48\">\r\n                                        <g>\r\n                                            <path fill=\"#EA4335\" d=\"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z\"></path>\r\n                                            <path fill=\"#4285F4\" d=\"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z\"></path>\r\n                                            <path fill=\"#FBBC05\" d=\"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z\"></path>\r\n                                            <path fill=\"#34A853\" d=\"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z\"></path>\r\n                                            <path fill=\"none\" d=\"M0 0h48v48H0z\"></path>\r\n                                        </g>\r\n                                    </svg><span className=\"icon-loading\"></span> <span>Sign in with Google</span></button>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"floor\" style={{ zIndex: -10 }}>\r\n                <div className={`shadow ${isActive ? \"\" : \"off\"}`}></div>\r\n            </div>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SignIn\r\n","import { Input, Button } from '@material-ui/core'\r\nimport React, { useEffect, useState } from 'react'\r\nimport firebase from 'firebase'\r\nimport { db, auth } from '../firebase'\r\n\r\nfunction SendMessages({ scroll }) {\r\n    const [msg, setMsg] = useState('')\r\n\r\n    async function sendMessage(e) {\r\n        e.preventDefault() //the page doesn't refresh when we press the button\r\n        const { uid, photoURL } = auth.currentUser\r\n\r\n        await db.collection('messages').add({\r\n            text: msg,\r\n            photoURL,\r\n            uid,\r\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\r\n        })\r\n        setMsg('') // 清空輸入欄位\r\n        scroll.current.scrollIntoView({ behavior: 'smooth' })\r\n    }\r\n\r\n    useEffect(() => {\r\n        scroll.current.scrollIntoView({ behavior: 'smooth' })\r\n    }, [sendMessage])\r\n\r\n    return (\r\n        <div>\r\n            <form onSubmit={sendMessage}>\r\n                <div className=\"sendMsg\">\r\n                    <Input style={{ width: '78%', fontSize: '15px', fontWeight: '550', marginLeft: '5px', marginBottom: '-3px' }} placeholder='Message...' type=\"text\" value={msg} onChange={e => setMsg(e.target.value)} />\r\n                    <Button style={{ width: '18%', fontSize: '15px', fontWeight: '550', margin: '4px 5% -13px 5%', maxWidth: '200px' }} type=\"submit\">Send</Button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SendMessages\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n// import MenuIcon from '@material-ui/icons/Menu';\r\nimport { auth } from '../firebase'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n    },\r\n}));\r\n\r\nexport default function ButtonAppBar() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar position=\"fixed\">\r\n                <Toolbar>\r\n                    <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n                        {/* <MenuIcon /> */}\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        來聊天~~\r\n                    </Typography>\r\n                    <Button color=\"inherit\" onClick={() => auth.signOut()} > Logout</Button>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </div >\r\n    );\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { auth, db } from '../firebase'\r\nimport SendMessages from './SendMessages'\r\n// import SignOut from './SignOut'\r\nimport NavBar from './NavBar'\r\n\r\nfunction Chat() {\r\n    const [messages, setMessages] = useState([])\r\n    const scroll = useRef()\r\n\r\n    useEffect(() => {\r\n        db.collection('messages').orderBy('createdAt').limit(50).onSnapshot((snapshot) => {\r\n            setMessages(snapshot.docs.map(doc => doc.data()))\r\n            //拿到 messages 這個collection的所有document\r\n        })\r\n    }, [])\r\n    // onSnapshot => 當 messages 這個 collection 有變動時，就會自動再執行\r\n\r\n    return (\r\n        <div>\r\n            <NavBar />\r\n            {/* <SignOut /> */}\r\n            <div className=\"msgs\">\r\n                {messages.map(({ id, text, photoURL, uid }) => (\r\n                    <div>\r\n                        <div key={id} className={`msg ${uid === auth.currentUser.uid ? 'sent' : 'received'}`}>\r\n                            <img className=\"photoImgURL\" src={photoURL} alt=\"\" />\r\n                            <p>{text}</p>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            <SendMessages scroll={scroll} />\r\n            <div ref={scroll}></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import './App.css';\r\nimport React, { useMemo } from 'react'\r\nimport SignIn from './components/SignIn';\r\nimport Chat from './components/Chat';\r\nimport { auth } from './firebase'\r\nimport { useAuthState } from 'react-firebase-hooks/auth'\r\n\r\nfunction App() {\r\n  const [user] = useAuthState(auth)\r\n\r\n  return (\r\n    <>\r\n\r\n\r\n      {user ? <Chat /> : <SignIn user={user} />}\r\n\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { createTheme, ThemeProvider } from '@material-ui/core/styles'\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#5f90a9'\r\n    }\r\n  }\r\n})\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ThemeProvider theme={theme}>\r\n      <App />\r\n    </ThemeProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}